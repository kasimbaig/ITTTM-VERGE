<div class="w-100 mx-auto">
  <!-- Header Section -->
  <div class="command-header">
    <div class="command-title-block">
      <i class="pi pi-ship"></i>
      <div>
        <h2>Vessel Master</h2>
        <p>Manage naval vessels and their specifications</p>
      </div>
    </div>

    <div class="command-actions">
      <button class="btn primary btn-sm" (click)="goBack()">
        <i class="pi pi-arrow-left"></i> Back
      </button>
      <button class="btn primary btn-sm" (click)="toggleForm(true)">
        <i class="pi pi-plus"></i> Add Vessel
      </button>

      <button class="btn outlined btn-sm">
        <i class="pi pi-upload"></i> Bulk Upload
      </button>

      <div class="menu-group">
        <p-tieredMenu #exportMenu [model]="exportOptions" popup appendTo="body"></p-tieredMenu>
        <button class="btn outlined btn-sm" (click)="exportMenu.toggle($event)">
          <i class="pi pi-file-export"></i> Export
        </button>
      </div>
    </div>
  </div>

  <app-paginated-table *ngIf="toggleTable"
    [columns]="cols" 
    [apiUrl]="apiUrl"
    [totalCount]="totalCount"
    [data]="vessels"
    [showEndActions]="true" 
    [showViewAction]="false"
    (editEvent)="editVesselDetails($event)" 
    (deleteEvent)="deleteVesselDetails($event)"
    (dataLoaded)="onDataLoaded($event)">
  </app-paginated-table>

</div>

<!-- Delete Confirmation Modal -->
<app-delete-confirmation-modal
  [visible]="showDeleteDialog"
  [message]="'Are you sure you want to delete ' + (selectedVessel.name || 'this vessel') + '?'"
  (onConfirm)="confirmDeletion()"
  (onCancel)="cancelDeletion()">
</app-delete-confirmation-modal>

<app-toast></app-toast>

<!-- Add Form -->
<app-add-form *ngIf="isFormOpen" 
  [isSingleColumn]="false" 
  [open]="isFormOpen" 
  [formConfig]="formConfigForNewDetails" 
  [formData]="newVessel"
  [fromTitle]="title" 
  (onOpenChange)="isFormOpen = $event" 
  (onSubmit)="handleSubmit($event)">
</app-add-form>

<!-- Edit Form -->
<app-add-form *ngIf="isEditFormOpen" 
  [isSingleColumn]="false" 
  [open]="isEditFormOpen" 
  [formConfig]="formConfigForNewDetails"
  [formData]="selectedVessel" 
  [fromTitle]="editTitle" 
  [isEditMode]="true" 
  (onOpenChange)="isEditFormOpen = $event"
  (onSubmit)="handleEditSubmit($event)">
</app-add-form>
